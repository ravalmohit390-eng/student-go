{% extends "base.html" %}

{% block title %}To-Do List{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-4" style="margin-bottom: 2rem;">
        <div class="card">
            <h3>Add Task</h3>
            <form method="POST" action="{{ url_for('main.todo') }}">
                <div class="form-group">
                    <label>Task Description</label>
                    <input type="text" name="task" class="form-control" required>
                </div>
                <div class="form-group">
                    <label>Priority</label>
                    <select name="priority" class="form-control">
                        <option value="High">High</option>
                        <option value="Medium" selected>Medium</option>
                        <option value="Low">Low</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Add Task</button>
            </form>
        </div>
    </div>

    <div class="col-md-8">
        <h3>My Tasks</h3>
        <ul class="task-list">
            {% for todo in todos %}
            <li
                class="task-item task-border-{{ todo.priority_class }} {{ 'task-completed' if todo.completed else '' }}">
                <div style="flex: 1;">
                    <h4 style="margin: 0;">{{ todo.task }}</h4>
                    <span class="badge badge-{{ todo.priority|lower }}"
                        style="margin-top: 5px; display: inline-block;">{{ todo.priority }}</span>
                </div>
                <div class="actions">
                    <a href="{{ url_for('main.complete_todo', id=todo.id) }}"
                        class="btn {{ 'btn-secondary' if todo.completed else 'btn-success' }} btn-sm">
                        <i class="fas {{ 'fa-undo' if todo.completed else 'fa-check' }}"></i>
                    </a>
                    <a href="{{ url_for('main.delete_todo', id=todo.id) }}" class="btn btn-danger btn-sm"><i
                            class="fas fa-trash"></i></a>
                </div>
            </li>
            {% else %}
            <p>No tasks found.</p>
            {% endfor %}
        </ul>
    </div>
</div>
{% endblock %}